#!/bin/bash
# Claude Interceptor for 'isort' command

# Check for bypass flags
if [[ "$CLAUDE_INTERCEPTOR_BYPASS" == "1" ]] || [[ "$*" == *"--force"* ]]; then
    if command -v isort >/dev/null 2>&1; then
        REAL_ISORT=$(which isort)
        exec "$REAL_ISORT" "$@"
    else
        echo "âŒ isort not found in system PATH" >&2
        exit 127
    fi
    exit $?
fi

echo "âŒ isort usage detected!"
echo ""
echo "ğŸ¤– AI Agent Instructions:"
echo "  For much faster import sorting:"
echo "  âš¡ ruff check --select I --fix $*"
echo "  ğŸ“¦ uv tool run ruff check --select I --fix $*  # If ruff not installed"
echo ""
echo "ğŸ’¡ Alternative - format and sort in one command:"
echo "  ğŸ“‹ ruff format $* && ruff check --select I --fix $*"
echo ""
echo "ğŸ’¡ Why ruff is better:"
echo "  â€¢ 10-100x faster than isort"
echo "  â€¢ Built in Rust for speed"
echo "  â€¢ Unified with linting and formatting"
echo "  â€¢ Better conflict resolution"
echo "  â€¢ Single tool for all code quality"
echo ""
echo "ğŸ”§ To proceed with isort anyway:"
echo "  isort --force $*"
echo "  CLAUDE_INTERCEPTOR_BYPASS=1 isort $*"
echo ""
echo "ğŸ’¡ Learn more: https://docs.astral.sh/ruff/rules/#isort-i"
echo "ğŸ”§ Disable globally: claude-interceptor disable"

exit 1