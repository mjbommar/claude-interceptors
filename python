#!/bin/bash
# Claude Interceptor for 'python' command

# Check for bypass flags
if [[ "$CLAUDE_INTERCEPTOR_BYPASS" == "1" ]] || [[ "$*" == *"--force"* ]]; then
    # Find the real python executable
    REAL_PYTHON=$(which python 2>/dev/null || which python3 2>/dev/null || echo "/usr/bin/python3")
    exec "$REAL_PYTHON" "$@"
    exit $?
fi

echo "âŒ Direct python usage detected!"
echo ""
echo "ğŸ¤– AI Agent Instructions:"
echo "  For better dependency management, consider:"
echo "  ğŸ“¦ uv run $*"
echo "  ğŸ“¦ python -m venv venv && source venv/bin/activate && python $*"
echo ""
echo "ğŸ”§ To proceed anyway:"
echo "  python --force $*"
echo "  CLAUDE_INTERCEPTOR_BYPASS=1 python $*"
echo ""
echo "ğŸ’¡ Learn more: https://docs.astral.sh/uv/"
echo "ğŸ”§ Disable globally: claude-interceptor disable"

exit 1